<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Tomato Manga Zone</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}

/* ===== THEME ===== */
:root{
  --bg:#000;
  --text:#fff;
  --card:#111;
  --accent:#ff2a2a;
}
body.light{
  --bg:#fff;
  --text:#000;
  --card:#f2f2f2;
  --accent:#ff2a2a;
}

html,body{
  width:100%;
  min-height:100%;
  background:var(--bg);
  color:var(--text);
  font-family:Arial,sans-serif;
  transition:.35s;
}

/* ================= INTRO ================= */
#intro{
  position:fixed;
  inset:0;
  background:black;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:3000;
  transition:.6s;
  overflow:hidden;
}
#intro.fade-out{opacity:0}
#intro h1{color:red;font-size:30px;z-index:2}
#intro p{opacity:.8;z-index:2}
#intro button{
  margin-top:25px;
  padding:12px 30px;
  border:none;
  border-radius:25px;
  background:red;
  color:white;
  cursor:pointer;
  z-index:2;
}

#introBg{
  position:absolute;
  inset:-40%;
  display:grid;
  grid-template-columns:repeat(auto-fill,160px);
  gap:18px;
  opacity:.8;
  filter:grayscale(35%);
  animation:introMove 90s linear infinite;
  z-index:1;
}
#introBg svg{width:160px;height:220px;border-radius:6px}
@keyframes introMove{
  from{transform:translate(0,0)}
  to{transform:translate(-600px,-500px)}
}

/* ================= HEADER ================= */
#mainHeader{
  position:sticky;
  top:0;
  z-index:2000;
  background:linear-gradient(180deg,#111,#000);
  box-shadow:0 6px 18px rgba(0,0,0,.7);
}
body.light #mainHeader{background:linear-gradient(180deg,#fff,#eee)}

#headerInner{
  height:64px;
  display:flex;
  align-items:center;
  padding:0 14px;
}
#headerLeft{width:170px}
.searchWrap{
  display:flex;
  align-items:center;
  gap:6px;
  padding:6px 12px;
  background:var(--card);
  border-radius:20px;
}
.searchWrap input{
  width:100px;
  background:none;
  border:none;
  outline:none;
  color:var(--text);
  font-size:13px;
}

#headerCenter{
  flex:1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  line-height: 1.1;
}
.logo-top {
  font-size: 13px;
  font-weight: 400;
  color: var(--text);
  letter-spacing: 3px;
  text-transform: uppercase;
}
.logo-bottom {
  font-size: 15px;
  font-weight: 900;
  color: var(--accent);
  letter-spacing: 1px;
  text-transform: uppercase;
}

#headerRight{width:120px;display:flex;justify-content:flex-end;gap:8px}

.iconBtn{
  width:40px;height:40px;border-radius:50%;background:var(--card);
  display:flex;align-items:center;justify-content:center;font-size:18px;cursor:pointer;
}

#headerLine{height:3px;background:linear-gradient(90deg,transparent,var(--accent),transparent)}

/* ===== SHOWCASE ===== */
#showcase{width:100%;aspect-ratio:14/7;max-height:280px;overflow:hidden;position:relative;background:#000;display:none}
#showcaseTrack{display:flex;height:100%;transition:transform 1s ease}
.showcaseItem{min-width:100%;height:100%}
.showcaseItem img{width:100%;height:100%;object-fit:cover}

#popularTitleBar {
  padding: 20px 15px 10px;
  display: none; 
  align-items: center;
  gap: 12px;
}
.pop-text {
  font-size: 16px;
  font-weight: 800;
  color: var(--accent);
  text-transform: uppercase;
  letter-spacing: 1.5px;
  white-space: nowrap;
}
.pop-line {
  height: 2px;
  flex: 1;
  background: linear-gradient(90deg, var(--accent), transparent);
  border-radius: 2px;
}

#featuredBar{width:100%;padding:14px 12px;overflow-x:auto;border-bottom:1px solid #222;display:none}
#featuredTrack{display:flex;gap:14px}
.featuredItem img{width:130px;height:180px;object-fit:cover;border-radius:8px}

/* ================= ADMIN ================= */
#adminSidebar{
  position:fixed;top:0;right:-320px;width:320px;height:100%;
  background:#111;padding:15px;transition:.4s;z-index:2500;overflow-y:auto;
}
#adminSidebar.show{right:0}
#adminSidebar input,#adminSidebar button{
  width:100%;margin:6px 0 12px;padding:12px;background:#222;color:white;border:none;border-radius:6px;
}
#adminBack{position:sticky;bottom:0;padding:10px;background:#1a1a1a;text-align:center;cursor:pointer}

/* ·Ä°·Äú·Äî·Ä∫·Ä∏·ÄÖ·Ä¨·Ä∏ Upload Design */
.upload-zone {
  border: 2px dashed #444;
  padding: 20px;
  text-align: center;
  border-radius: 8px;
  margin: 10px 0;
  background: #1a1a1a;
  color: #888;
  cursor: pointer;
  transition: .3s;
}
.upload-zone:active { border-color: var(--accent); background: #222; }
.upload-zone b { color: var(--accent); display: block; margin-bottom: 5px; }

/* Preview Grid */
#previewGrid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 5px;
  margin-top: 10px;
  margin-bottom: 15px;
}
.pre-img { width: 100%; aspect-ratio: 1/1; object-fit: cover; border-radius: 4px; border: 1px solid #333; }

/* HISTORY & LIST */
#mangaList{display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));gap:15px;padding:20px}
.manga img{width:100%;aspect-ratio:3/4;object-fit:cover;border-radius:6px}
.manga p{text-align:center;font-size:13px;margin-top:6px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}

#detailPage{display:none;padding:15px}
.backBtn{background:#333;color:white;padding:8px;margin-bottom:15px;border-radius:4px;cursor:pointer;border:none}
#chapterList img{width:100%;display:block;margin-bottom:2px}

#uploadStatus{position:fixed;bottom:20px;right:20px;padding:7px 14px;font-size:13px;border-radius:6px;background:#111;opacity:0;transition:.3s;z-index:4000}
#uploadStatus.show{opacity:1}
#uploadStatus.success{border:1px solid #0f0;color:#0f0}
#uploadStatus.fail{border:1px solid #f00;color:#f00}

#historyList{max-height:200px;overflow-y:auto}
.historyItem{display:flex;align-items:center;gap:10px;padding:6px;margin-bottom:6px;background:#1a1a1a;border-radius:6px}
.historyItem img{width:45px;height:60px;object-fit:cover;border-radius:4px}
.historyInfo{flex:1;font-size:12px;overflow:hidden}
</style>
</head>

<body>

<div id="intro">
  <div id="introBg"></div>
  <h1>Tomato Manga Zone</h1>
  <p>Manga Online Read</p>
  <button onclick="enterSite()">ENTER</button>
</div>

<div id="mainHeader" style="display:none">
  <div id="headerInner">
    <div id="headerLeft"><div class="searchWrap">üîç <input placeholder="Search..."></div></div>
    <div id="headerCenter">
      <span class="logo-top">Tomato</span>
      <span class="logo-bottom">Manga Zone</span>
    </div>
    <div id="headerRight">
      <div class="iconBtn" id="themeBtn">üåô</div>
      <div class="iconBtn" onclick="toggleAdmin()">‚ò∞</div>
    </div>
  </div>
  <div id="headerLine"></div>
</div>

<div id="showcase"><div id="showcaseTrack"></div></div>

<div id="popularTitleBar">
  <span class="pop-text">Popular Manga</span>
  <div class="pop-line"></div>
</div>

<div id="featuredBar"><div id="featuredTrack"></div></div>

<div id="adminSidebar">
  <div id="loginBox">
    <label>Admin Password</label>
    <input type="password" id="adminPass">
    <button onclick="checkPass()">Login</button>
  </div>

  <div id="adminForm" style="display:none">
    <h3 style="color: #0f0;">Step 1: Create Manga</h3>
    <input id="mangaTitle" placeholder="Manga Title">
    <label>Cover Image</label>
    <input type="file" id="mangaImg" accept="image/*">
    <button onclick="uploadManga()" style="background: #2255ff;">Create Manga</button>

    <hr style="margin: 20px 0; border: 0.5px solid #333;">

    <h3 style="color: #ff9900;">Step 2: Add Chapter</h3>
    <select id="mangaSelect"></select>
    <input id="chapterTitle" placeholder="Chapter Title (e.g. Ch 01)">
    
    <div class="upload-zone" onclick="document.getElementById('chapterFiles').click()">
      <b>üìÅ SELECT MULTIPLE IMAGES</b>
      <span id="fileStatus">Click to open Gallery</span>
    </div>
    <input type="file" id="chapterFiles" accept="image/*" multiple onchange="handleFiles(this.files)" style="display:none">
    
    <div id="previewGrid"></div>

    <button onclick="uploadChapter()" style="background: #ff2a2a;">Upload Chapter</button>

    <h3>Manage</h3>
    <div id="historyList"></div>
  </div>
  <div id="adminBack" onclick="toggleAdmin()">‚Üê Back</div>
</div>

<div id="mangaList"></div>

<div id="detailPage">
  <button class="backBtn" onclick="closeDetail()">‚Üê Back</button>
  <h2 id="detailName" style="margin-bottom:10px;"></h2>
  <div id="chapterList"></div>
</div>

<div id="uploadStatus"></div>

<script>
for(let i=0;i<42;i++){
  introBg.innerHTML+=`<svg viewBox="0 0 160 220"><rect width="160" height="220" fill="#222"/><rect x="10" y="10" width="140" height="60" fill="#000"/><rect x="10" y="80" width="60" height="50" fill="#000"/><rect x="80" y="80" width="70" height="120" fill="#000"/></svg>`;
}

const ADMIN_PASSWORD="Tomatochitsanmg03";
let mangas=[];
let currentFiles = [];

function handleFiles(files) {
  currentFiles = Array.from(files);
  const status = document.getElementById('fileStatus');
  const grid = document.getElementById('previewGrid');
  
  status.innerText = currentFiles.length + " images selected";
  grid.innerHTML = "";
  
  // Preview ·Äë·Ää·Ä∑·Ä∫·Äú·Ä≠·ÄØ·ÄÄ·Ä∫·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏·ÄÄ ·Äï·ÄØ·Ä∂·Äê·ÄΩ·Ä±·Ä°·Äô·Äª·Ä¨·Ä∏·ÄÄ·Äº·ÄÆ·Ä∏ ·Äï·Ä´·Äô·Äï·Ä´ ·Äû·Ä≠·Äû·Ä¨·ÄÖ·Ä±·Äï·Ä´·Äê·Äö·Ä∫
  currentFiles.slice(0, 8).forEach(file => {
    const reader = new FileReader();
    reader.onload = (e) => {
      grid.innerHTML += `<img src="${e.target.result}" class="pre-img">`;
    };
    reader.readAsDataURL(file);
  });
  if(currentFiles.length > 8) grid.innerHTML += `<div style="display:grid; place-items:center; background:#222; border-radius:4px; font-size:10px;">+${currentFiles.length - 8}</div>`;
}

function enterSite(){
  intro.classList.add("fade-out");
  setTimeout(()=>{ intro.style.display="none"; mainHeader.style.display="block"; },600);
}

themeBtn.onclick=()=>{
  document.body.classList.toggle("light");
  themeBtn.innerText=document.body.classList.contains("light")?"üåû":"üåô";
}

function toggleAdmin(){adminSidebar.classList.toggle("show")}

function checkPass(){
  if(adminPass.value===ADMIN_PASSWORD){
    loginBox.style.display="none"; adminForm.style.display="block";
    showStatus("Login Successful","success");
  }else showStatus("Wrong Password","fail");
}

function showStatus(t,type){
  uploadStatus.innerText=t; uploadStatus.className=type+" show";
  setTimeout(()=>uploadStatus.className="",2000);
}

function uploadManga(){
  if(!mangaTitle.value || !mangaImg.files[0]){
    showStatus("Title & Cover required","fail"); return;
  }
  const newManga = {
    id: Date.now(),
    name: mangaTitle.value,
    img: URL.createObjectURL(mangaImg.files[0]),
    chapters: []
  };
  mangas.push(newManga);
  updateMangaSelect(); renderPublic(); renderFeatured(); renderShowcase(); renderHistory();
  mangaTitle.value = ""; mangaImg.value = "";
  showStatus("Manga Created!","success");
}

function uploadChapter(){
  const selectedId = document.getElementById('mangaSelect').value;
  const cTitle = document.getElementById('chapterTitle').value;

  if(!selectedId || !cTitle || currentFiles.length === 0){
    showStatus("Required fields missing","fail"); return;
  }

  const targetManga = mangas.find(m => m.id == selectedId);
  const pagesArray = currentFiles.map(file => URL.createObjectURL(file));

  targetManga.chapters.push({ title: cTitle, pages: pagesArray });
  showStatus("Chapter Uploaded!","success");
  
  // Reset
  document.getElementById('chapterTitle').value = "";
  document.getElementById('chapterFiles').value = "";
  document.getElementById('previewGrid').innerHTML = "";
  document.getElementById('fileStatus').innerText = "Click to open Gallery";
  currentFiles = [];
  renderHistory();
}

function updateMangaSelect(){
  document.getElementById('mangaSelect').innerHTML = mangas.map(m => `<option value="${m.id}">${m.name}</option>`).join('');
}

function renderPublic(){
  mangaList.innerHTML = mangas.map(m => `
    <div class="manga" onclick="openManga(${m.id})">
      <img src="${m.img}">
      <p>${m.name}</p>
    </div>`).join('');
}

function renderFeatured(){
  if(mangas.length > 0) { featuredBar.style.display="block"; popularTitleBar.style.display="flex"; }
  featuredTrack.innerHTML = mangas.map(m => `<div class="featuredItem" onclick="openManga(${m.id})"><img src="${m.img}"></div>`).join('');
}

function renderShowcase(){
  if(mangas.length > 0) showcase.style.display="block";
  showcaseTrack.innerHTML = mangas.map(m => `<div class="showcaseItem"><img src="${m.img}"></div>`).join('');
}

function renderHistory(){
  historyList.innerHTML = mangas.map(m => `
    <div class="historyItem">
      <img src="${m.img}">
      <div class="historyInfo"><b>${m.name}</b><br>${m.chapters.length} Chapters</div>
      <div style="color:red; cursor:pointer;" onclick="deleteManga(${m.id})">üóëÔ∏è</div>
    </div>`).join('');
}

function deleteManga(id){
  mangas = mangas.filter(m => m.id !== id);
  renderPublic(); renderFeatured(); renderShowcase(); renderHistory(); updateMangaSelect();
}

function openManga(id){
  const m = mangas.find(x => x.id === id);
  mangaList.style.display = "none"; showcase.style.display = "none"; featuredBar.style.display = "none";
  popularTitleBar.style.display = "none";
  detailPage.style.display = "block";
  detailName.innerText = m.name;
  
  let html = "";
  if(m.chapters.length === 0) html = "<p style='text-align:center; opacity:0.5;'>No chapters yet.</p>";
  else {
    m.chapters.forEach(ch => {
      html += `<h3 style="margin:20px 0 10px; color:red;">${ch.title}</h3>`;
      ch.pages.forEach(p => { html += `<img src="${p}">`; });
    });
  }
  chapterList.innerHTML = html;
  window.scrollTo(0,0);
}

function closeDetail(){
  detailPage.style.display = "none"; mangaList.style.display = "grid";
  if(mangas.length > 0){ showcase.style.display="block"; featuredBar.style.display="block"; popularTitleBar.style.display="flex"; }
}
</script>
</body>
</html>

